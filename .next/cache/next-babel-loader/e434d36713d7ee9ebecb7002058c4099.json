{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport { CssBaseline, IconButton, Menu, MenuItem } from '@material-ui/core';\nimport React from 'react';\nimport { Translate as TranslateIcon } from '@material-ui/icons';\nimport { router } from \"../../../lib/router\";\nexport default function (_ref) {\n  var i18n = _ref.i18n;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      anchorEl = _React$useState2[0],\n      setAnchorEl = _React$useState2[1];\n\n  var open = Boolean(anchorEl);\n\n  function handleMenu(event) {\n    setAnchorEl(event.currentTarget);\n  }\n\n  function handleClose(_x) {\n    return _handleClose.apply(this, arguments);\n  }\n\n  function _handleClose() {\n    _handleClose = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var lang, route;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              lang = e.currentTarget.dataset.lang;\n              _context.next = 3;\n              return i18n.changeLanguage(lang || 'en');\n\n            case 3:\n              route = router.route.replace('/', '');\n              router.replaceRoute(route === '' ? 'index' : route, _objectSpread({}, router.query, {\n                lng: lang\n              }));\n              setAnchorEl(null);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _handleClose.apply(this, arguments);\n  }\n\n  return __jsx(\"div\", null, __jsx(CssBaseline, null), __jsx(IconButton, {\n    \"aria-label\": \"account of current user\",\n    \"aria-controls\": \"menu-appbar\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleMenu,\n    color: \"inherit\"\n  }, __jsx(TranslateIcon, null)), __jsx(Menu, {\n    id: \"menu-appbar\",\n    anchorEl: anchorEl,\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'right'\n    },\n    keepMounted: true,\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'right'\n    },\n    open: open,\n    onClose: handleClose\n  }, __jsx(MenuItem, {\n    \"data-lang\": \"en\",\n    onClick: handleClose\n  }, \"En\"), __jsx(MenuItem, {\n    \"data-lang\": \"zh-TW\",\n    onClick: handleClose\n  }, \"\\u4E2D\\u6587\")));\n}","map":{"version":3,"sources":["/Users/shiacruz/Desktop/project/next-ts-ssr/components/Common/Layout/LangMenu.tsx"],"names":["CssBaseline","IconButton","Menu","MenuItem","React","Translate","TranslateIcon","router","i18n","useState","anchorEl","setAnchorEl","open","Boolean","handleMenu","event","currentTarget","handleClose","e","lang","dataset","changeLanguage","route","replace","replaceRoute","query","lng","vertical","horizontal"],"mappings":";;;;;AAAA,SAASA,WAAT,EAAsBC,UAAtB,EAAkCC,IAAlC,EAAwCC,QAAxC,QAAwD,mBAAxD;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAS,IAAIC,aAAtB,QAA2C,oBAA3C;AAEA,SAASC,MAAT;AAMA,eAAe,gBAA0B;AAAA,MAAfC,IAAe,QAAfA,IAAe;;AAAA,wBACPJ,KAAK,CAACK,QAAN,CAAe,IAAf,CADO;AAAA;AAAA,MAChCC,QADgC;AAAA,MACtBC,WADsB;;AAEvC,MAAMC,IAAI,GAAGC,OAAO,CAACH,QAAD,CAApB;;AAEA,WAASI,UAAT,CAAoBC,KAApB,EAAgE;AAC9DJ,IAAAA,WAAW,CAACI,KAAK,CAACC,aAAP,CAAX;AACD;;AANsC,WAQxBC,WARwB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,6BAQvC,iBAA2BC,CAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,cAAAA,IADR,GACeD,CAAC,CAACF,aAAF,CAAgBI,OAAhB,CAAwBD,IADvC;AAAA;AAAA,qBAEQX,IAAI,CAACa,cAAL,CAAoBF,IAAI,IAAI,IAA5B,CAFR;;AAAA;AAGMG,cAAAA,KAHN,GAGcf,MAAM,CAACe,KAAP,CAAaC,OAAb,CAAqB,GAArB,EAA0B,EAA1B,CAHd;AAIEhB,cAAAA,MAAM,CAACiB,YAAP,CAAoBF,KAAK,KAAK,EAAV,GAAe,OAAf,GAAyBA,KAA7C,oBACKf,MAAM,CAACkB,KADZ;AAEEC,gBAAAA,GAAG,EAAEP;AAFP;AAIAR,cAAAA,WAAW,CAAC,IAAD,CAAX;;AARF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KARuC;AAAA;AAAA;;AAmBvC,SACE,mBACE,MAAC,WAAD,OADF,EAEE,MAAC,UAAD;AACE,kBAAW,yBADb;AAEE,qBAAc,aAFhB;AAGE,qBAAc,MAHhB;AAIE,IAAA,OAAO,EAAEG,UAJX;AAKE,IAAA,KAAK,EAAC;AALR,KAOE,MAAC,aAAD,OAPF,CAFF,EAWE,MAAC,IAAD;AACE,IAAA,EAAE,EAAC,aADL;AAEE,IAAA,QAAQ,EAAEJ,QAFZ;AAGE,IAAA,YAAY,EAAE;AACZiB,MAAAA,QAAQ,EAAE,KADE;AAEZC,MAAAA,UAAU,EAAE;AAFA,KAHhB;AAOE,IAAA,WAAW,MAPb;AAQE,IAAA,eAAe,EAAE;AACfD,MAAAA,QAAQ,EAAE,KADK;AAEfC,MAAAA,UAAU,EAAE;AAFG,KARnB;AAYE,IAAA,IAAI,EAAEhB,IAZR;AAaE,IAAA,OAAO,EAAEK;AAbX,KAeE,MAAC,QAAD;AAAU,iBAAU,IAApB;AAAyB,IAAA,OAAO,EAAEA;AAAlC,UAfF,EAkBE,MAAC,QAAD;AAAU,iBAAU,OAApB;AAA4B,IAAA,OAAO,EAAEA;AAArC,oBAlBF,CAXF,CADF;AAoCD","sourcesContent":["import { CssBaseline, IconButton, Menu, MenuItem } from '@material-ui/core'\n\nimport React from 'react'\nimport { Translate as TranslateIcon } from '@material-ui/icons'\nimport i18next from 'i18next'\nimport { router } from '@App/lib/router'\n\ninterface Props {\n  i18n: i18next.i18n\n}\n\nexport default function({ i18n }: Props) {\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const open = Boolean(anchorEl)\n\n  function handleMenu(event: React.MouseEvent<HTMLButtonElement>) {\n    setAnchorEl(event.currentTarget as any)\n  }\n\n  async function handleClose(e: React.MouseEvent<HTMLLIElement>) {\n    const lang = e.currentTarget.dataset.lang\n    await i18n.changeLanguage(lang || 'en')\n    let route = router.route.replace('/', '')\n    router.replaceRoute(route === '' ? 'index' : route, {\n      ...router.query,\n      lng: lang\n    })\n    setAnchorEl(null)\n  }\n\n  return (\n    <div>\n      <CssBaseline />\n      <IconButton\n        aria-label='account of current user'\n        aria-controls='menu-appbar'\n        aria-haspopup='true'\n        onClick={handleMenu}\n        color='inherit'\n      >\n        <TranslateIcon />\n      </IconButton>\n      <Menu\n        id='menu-appbar'\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'right'\n        }}\n        keepMounted\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'right'\n        }}\n        open={open}\n        onClose={handleClose}\n      >\n        <MenuItem data-lang='en' onClick={handleClose}>\n          En\n        </MenuItem>\n        <MenuItem data-lang='zh-TW' onClick={handleClose}>\n          中文\n        </MenuItem>\n      </Menu>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}